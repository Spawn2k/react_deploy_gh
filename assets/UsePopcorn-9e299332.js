import{j as e,u as j,r as C,H as D}from"./index-5dda07d2.js";import{P as m}from"./index-e7b2f58e.js";const H=n=>{const{children:s}=n;return e.jsx("main",{className:"m-use-popcorn-main main",children:s})},T=n=>{const{query:s,getQuery:t,searchList:r}=j();return e.jsxs("nav",{className:"nav-bar",children:[e.jsxs("div",{className:"logo",children:[e.jsx("span",{role:"img",children:"🍿"}),e.jsx("h1",{children:"usePopcorn"})]}),e.jsx("input",{className:"search",type:"text",placeholder:"Search movies...",value:s,onChange:i=>t(i.target.value)}),e.jsxs("p",{className:"num-results",children:["Found ",e.jsx("strong",{children:r==null?void 0:r.length})," results"]})]})},k=n=>{const{children:s}=n;return e.jsx("section",{className:"box",children:s})},y=n=>{const{children:s,isOpen:t}=n;return j(),e.jsx("button",{onClick:t,className:"btn-toggle",children:s})},M=n=>e.jsx("p",{className:"use-popcorn-loader",children:"Loading..."}),N=n=>{const{isOpen:s,render:t,movies:r}=n;return s?null:e.jsx("ul",{className:"list list-movies",children:r==null?void 0:r.map(t)})},g=n=>{const{emoji:s,info:t}=n;return e.jsxs("p",{children:[e.jsx("span",{children:s}),e.jsx("span",{children:t})]})},L=n=>{const{movies:{Title:s,Poster:t,Year:r,imdbID:i,userRating:o,Runtime:c,imdbRating:d}}=n,{getMovieId:x,deleteMovie:a}=j();return e.jsxs("li",{onClick:()=>x(i),children:[e.jsx("img",{src:t,alt:`Movie: ${s}`}),e.jsx("h3",{children:s}),s&&!o&&e.jsx(g,{info:r,emoji:"🕒"}),o&&e.jsxs("div",{children:[e.jsx(g,{emoji:"🌟",info:o}),e.jsx(g,{emoji:"⭐",info:d}),e.jsx(g,{emoji:"⌛",info:c+" min"}),e.jsx("button",{onClick:l=>{l.stopPropagation(),a(i)},className:"btn-delete",children:e.jsx("svg",{stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 15 15",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"})})})]})]})},b=n=>n.reduce((s,t,r,i)=>s+t/i.length,0),W=n=>{const{watchedMovies:s}=j(),t=b(s.map(o=>o.imdbRating)),r=b(s.map(o=>o.userRating)),i=b(s.map(o=>o.Runtime));return e.jsxs("div",{className:"summary",children:[e.jsx("h2",{children:"Movies you watched"}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{children:"#️⃣"}),e.jsxs("span",{children:[s.length," movies"]})]}),e.jsxs("p",{children:[e.jsx("span",{children:"⭐️"}),e.jsxs("span",{children:[r.toFixed(1)," User"]})]}),e.jsxs("p",{children:[e.jsx("span",{children:"🌟"}),e.jsxs("span",{children:[t.toFixed(1)," Imdb"]})]}),e.jsxs("p",{children:[e.jsx("span",{children:"⏳"}),e.jsxs("span",{children:[i.toFixed(2),"min"]})]})]})]})},U={display:"flex",alignItems:"center",gap:"16px",marginLeft:"2.5rem"},F={display:"flex"};O.propTypes={maxRating:m.number,defaultRating:m.number,color:m.string,size:m.number,messages:m.array,className:m.string};function O({maxRating:n=5,color:s="#fcc419",size:t=48,className:r="",messages:i=[],defaultRating:o=0,onSetRating:c}){const[d,x]=C.useState(o),[a,l]=C.useState(0);function h(u){x(u),c(u)}const v={lineHeight:"1",margin:"0",color:s,fontSize:`${t/1.5}px`};return e.jsxs("div",{style:U,className:r,children:[e.jsx("div",{style:F,children:Array.from({length:n},(u,p)=>e.jsx(Y,{full:a?a>=p+1:d>=p+1,onRate:()=>h(p+1),onHoverIn:()=>l(p+1),onHoverOut:()=>l(0),color:s,size:t},p))}),e.jsx("p",{style:v,children:i.length===n?i[a?a-1:d-1]:a||d||""})]})}function Y({onRate:n,full:s,onHoverIn:t,onHoverOut:r,color:i,size:o}){const c={width:`${o}px`,height:`${o}px`,display:"block",cursor:"pointer"};return e.jsx("span",{role:"button",style:c,onClick:n,onMouseEnter:t,onMouseLeave:r,children:s?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:i,stroke:i,children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:i,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})}const $=n=>{var R;const{movieInfo:{Title:s,Year:t,Genre:r,Plot:i,Released:o,Actors:c,Poster:d,imdbRating:x,Director:a,Runtime:l,imdbID:h},getUserRating:v,userRating:u,addMovie:p,getMovieId:P,watchedMovies:w}=j(),f=(R=w==null?void 0:w.filter(B=>B.imdbID===h)[0])==null?void 0:R.userRating,z={imdbID:h,Title:s,imdbRating:Number(x),userRating:Number(u),Runtime:Number(l==null?void 0:l.split(" ")[0]),Poster:d,Year:t};return e.jsxs("div",{className:"details",children:[e.jsxs("header",{children:[e.jsx("button",{onClick:()=>P(null),className:"btn-back",children:e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M249.38 336L170 256l79.38-80m-68.35 80H342"})})}),e.jsx("img",{src:d,alt:""}),e.jsxs("div",{className:"details-overview",children:[e.jsx("h2",{children:s}),e.jsxs("p",{children:[o," • ",l]}),e.jsx("p",{children:r}),e.jsxs("p",{children:[e.jsx("span",{children:"⭐"})," ",x," IMBD rating"]})]})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"rating",children:[f?e.jsxs("p",{children:["You ratet this movie with ",f," ⭐"]}):e.jsx(O,{size:24,maxRating:10,onSetRating:v}),!f&&e.jsx("button",{onClick:()=>p(z),className:"btn-add",children:"+ Add to list"})]}),e.jsx("p",{children:e.jsx("em",{children:i})}),e.jsxs("p",{children:["Starring ",c]}),e.jsxs("p",{children:["Director ",a]})]})]})},S=e.jsxs("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 1024 1024",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}),e.jsx("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"})]}),I=e.jsxs("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 1024 1024",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}),e.jsx("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"})]}),V=n=>{const{setIsOpen1:s,isOpen1:t,isOpen2:r,setIsOpen2:i,searchList:o,movieId:c,watchedMovies:d,isLoadingSearch:x,isLoadingMovieDetails:a,error:l}=j();return e.jsxs("div",{className:"m-use-popcorn-wraper",children:[e.jsx(T,{}),e.jsxs(H,{children:[e.jsxs(k,{children:[e.jsx(y,{isOpen:s,children:t?S:I}),x&&e.jsx(M,{}),l&&e.jsxs("p",{className:"error",children:[" ❌ ",l]}),!l&&!x&&e.jsx(N,{isOpen:t,movies:o,render:h=>e.jsx(L,{movies:h},h.imdbID)})]}),e.jsxs(k,{children:[e.jsx(y,{isOpen:i,children:r?S:I}),!c&&!r&&e.jsx(W,{}),c&&!a&&e.jsx($,{},c),a&&e.jsx(M,{}),!c&&e.jsx(N,{isOpen:r,movies:d,render:h=>e.jsx(L,{movies:h},h.imdbID)})]})]}),e.jsx(D,{color:"#6741d9"})]})};export{V as default};
